<!DOCTYPE html>
<html lang="en">
<!--
   __ ___   __  __               __
  / // (_) / /_/ /  ___ _______ / /
 / _  / / / __/ _ \/ -_) __/ -_)_/ 
/_//_/_/  \__/_//_/\__/_/  \__(_)  

  _      ____        __                                              __     ___ 
 | | /| / / /  ___ _/ /_  ___ ________   __ _____  __ __  __ _____  / /____/__ \
 | |/ |/ / _ \/ _ `/ __/ / _ `/ __/ -_) / // / _ \/ // / / // / _ \/ __/ _ \/__/
 |__/|__/_//_/\_,_/\__/  \_,_/_/  \__/  \_, /\___/\_,_/  \_,_/ .__/\__/\___(_)  
                                       /___/                /_/                 
-->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Online Territory of Shikher Verma">

    <title>Using UIL Library with Image Getter to load HTML Images in a TextView - My Territory</title>

    <link rel="canonical" href="/blog/Using-UIL-With-HtmlTextView">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <link rel="stylesheet" href="/css/khaled.css">
    <link rel="stylesheet" href="/css/katex.min.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">
    <!-- KTex for maths symbols-->
    <script src="/js/katex.min.js"></script>

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <link type="application/atom+xml" rel="alternate" href="http://shikherverma.com/feed.xml" title="My Territory" />

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">My Territory</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                             
                <li>
                    <a href="/">Blog</a>
                </li>
                        
                <li>
                    <a href="/index_">Khaled Ben Abdallah</a>
                </li>
                        
                <li>
                    <a href="/search/" class="nav-search-link" title="SEARCH">
                        <span class="fa fa-search nav-search-icon"></span>
                    </a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/posts/android-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Using UIL Library with Image Getter to load HTML Images in a TextView</h1>
                    
                    <h2 class="subheading"></h2>
                    
                    <span class="meta" style='margin-top:0.5em;'>Posted by Shikher Verma on June 2, 2016
                    </span>
                    <span class="meta" style='margin-top:0.5em;'> Tags: <a href="/blog/tags/CodeMonkey"><i class="fa fa-tag"></i> CodeMonkey</a>  </span>
                    <span class="meta" style='margin-top:0.5em;'>
                        
                        <i class="fa fa-clock-o"></i>&nbsp;
                        2 minute read
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p><em>This blog post assumes that the reader has a clear understanding of Basic Android Development.</em></p>

<p>Presenting HTML data in an Android application is problematic. For instance, if you have a big junk of HTML, you may use a Web View; however it would become awfully slow for multiple independent pieces. As an alternative you can use a TextView. Unfortunately TextView doesnâ€™t support all the HTML tags, even some common ones. Luckily, there is a nice library called <code class="highlighter-rouge">HtmlTextView</code> which adds support for most of the common tags. Although loading images in TextView is a pain, the load time is large and it is always loaded in the memory. Thus if your images are large, you will soon get an OutOfMemory Error (OOM). For android this limit is around 20MB of Ram. Popular image loading and caching libraries mostly set an image directly to the ImageView. However, there is a workaround for using Universal Image Loader Library (UIL) for loading and caching images. It turns out you can give your custom implementation of ImageGetter (an interface) to load images.</p>

<p>Following is an implementation of ImageGetter which fetches images using UIL:
<script src="https://gist.github.com/ShikherVerma/740ccdc1e4021aec78078df2857449b9.js?file=HuracanImageGetter.java"> </script></p>

<p>Now setting HTML to HtmlTextView (which is a descendant of TextView) with the new ImageGetter:
<script src="https://gist.github.com/ShikherVerma/740ccdc1e4021aec78078df2857449b9.js?file=SetHtmlToTextView.java"> </script></p>

<p>After this, you can also resize the image to fit into a screen size. Doing it after caching would be wrong because then each time
image would be resized after loading from the cache. So resizing should be done before caching, and not in the ImageGetter implementation. This class would be later used in the <code class="highlighter-rouge">Application.java</code> file as shown later.
<script src="https://gist.github.com/ShikherVerma/740ccdc1e4021aec78078df2857449b9.js?file=HuracanBitmapProcessor.java"> </script></p>

<p>Setting the default preferences for universal image in the application. These are some of the default things that need to be done in order to tell the UIL to set preferences like using cache.
<script src="https://gist.github.com/ShikherVerma/740ccdc1e4021aec78078df2857449b9.js?file=HuracanApplication.java"> </script></p>

                <br>
                
                    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        this.page.url = shikherverma.com/blog/Using-UIL-With-HtmlTextView;
        this.page.identifier = shikherverma.com/blog/Using-UIL-With-HtmlTextView;
            };
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        
        s.src = '//shikherverma.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
                
                <br>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/blog/Geeks-Guide-To-Small-Talk" data-toggle="tooltip" data-placement="top" title="Geeks Guide To Small Talk">&larr; Previous Post</a>
                    </li>
                    
                    
                </ul>

            </div>
        </div>
    </div>
</article>
<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/shikherverma1">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/shikherverma">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="mailto:root@shikherverma.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted"><a href="https://feedburner.google.com/fb/a/mailverify?uri=programmer-wannabe&amp;loc=en_US">Subscribe by Email</a> <br><br> Copyright &copy; Khaled Ben abdallah 2016</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-75681059-1', 'auto');
  ga('send', 'pageview');

</script>
</html>
